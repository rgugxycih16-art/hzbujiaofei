<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸Šè‚¿ç—…ç†åŠäº‹æŒ‡å—</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- QRCode.js åº“ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    
    <style>
        /* éšè—æ»šåŠ¨æ¡ */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        body { 
            background-color: #FDFBF7; 
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* å¼¹çª—åŠ¨ç”» */
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        .modal-animate { animation: fadeIn 0.2s ease-out forwards; }

        /* --- äºŒç»´ç ä¿®æ­£æ ·å¼ (å…³é”®) --- */
        /* qrcode.js é»˜è®¤ç”Ÿæˆ canvas å’Œ imgï¼Œæˆ‘ä»¬éšè— canvasï¼Œæ˜¾ç¤º img */
        #qrcode canvas {
            display: none !important;
        }
        #qrcode img {
            display: block !important;
            margin: 0 auto; /* å±…ä¸­ */
            max-width: 100%;
            height: auto;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef, useEffect } = React;

        // --- å›¾æ ‡ç»„ä»¶ ---
        const Icon = ({ name, className }) => {
            const icons = {
                Clock: <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>,
                CreditCard: <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="20" height="14" x="2" y="5" rx="2"/><line x1="2" x2="22" y1="10" y2="10"/></svg>,
                FileText: <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="16" x2="8" y1="13" y2="13"/><line x1="16" x2="8" y1="17" y2="17"/><line x1="10" x2="8" y1="9" y2="9"/></svg>,
                Package: <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m7.5 4.27 9 5.15"/><path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/><path d="m3.3 7 8.7 5 8.7-5"/><path d="M12 22V12"/></svg>,
                AlertCircle: <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/></svg>,
                Info: <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>,
                ArrowUp: <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m5 12 7-7 7 7"/><path d="M12 19V5"/></svg>,
                Hourglass: <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M5 22h14"/><path d="M5 2h14"/><path d="M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22"/><path d="M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2"/></svg>,
                Calendar: <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></svg>,
                Smile: <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><path d="M8 14s1.5 2 4 2 4-2 4-2"/><line x1="9" x2="9.01" y1="9" y2="9"/><line x1="15" x2="15.01" y1="9" y2="9"/></svg>,
                Coffee: <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M17 8h1a4 4 0 1 1 0 8h-1"/><path d="M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z"/><line x1="6" x2="6" y1="2" y2="4"/><line x1="10" x2="10" y1="2" y2="4"/><line x1="14" x2="14" y1="2" y2="4"/></svg>,
                Sparkles: <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M9 3v4"/><path d="M3 5h4"/><path d="M3 9h4"/></svg>,
                Phone: <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>,
                UserCheck: <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><polyline points="16 11 18 13 22 9"/></svg>,
                X: <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M18 6 6 18"/><path d="m6 6 18 18"/></svg>,
                MessageCircleDots: <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z"/><path d="M8 12h.01"/><path d="M12 12h.01"/><path d="M16 12h.01"/></svg>
            };
            return icons[name] || null;
        };

        // --- è¾…åŠ©ç»„ä»¶ ---
        function Card({ children }) {
            return (
                <div className="bg-white p-6 rounded-2xl shadow-sm border border-stone-100 hover:shadow-md transition-shadow duration-300">
                    {children}
                </div>
            );
        }

        function Step({ number, title, desc, note }) {
            return (
                <div className="relative pl-8">
                    <div className="absolute left-[-11px] top-0 bg-emerald-500 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold border-2 border-white shadow-sm ring-1 ring-emerald-100">
                        {number}
                    </div>
                    <h3 className="font-bold text-stone-700 text-sm">{title}</h3>
                    <p className="text-sm text-stone-600 mt-1 leading-relaxed">{desc}</p>
                    {note && <p className="text-xs text-orange-500 mt-1 font-medium bg-orange-50 inline-block px-2 py-0.5 rounded-full">{note}</p>}
                </div>
            );
        }

        function TimeItem({ title, time, desc }) {
            return (
                <div className="flex justify-between items-center p-4 bg-[#F9FAFB] rounded-xl border border-stone-100">
                    <div>
                        <div className="font-bold text-stone-700 text-sm">{title}</div>
                        {desc && <div className="text-xs text-stone-500 mt-1">{desc}</div>}
                    </div>
                    <div className="flex items-center gap-1 text-emerald-600 font-bold text-sm bg-white px-3 py-1.5 rounded-lg shadow-sm border border-stone-100">
                        <Icon name="Calendar" className="w-3 h-3" />
                        {time}
                    </div>
                </div>
            );
        }

        function FAQItem({ question, children }) {
            return (
                <div className="mb-5 last:mb-0">
                    <h4 className="font-bold text-stone-700 text-sm flex items-start gap-2">
                        <span className="text-emerald-500 font-black text-lg leading-none mt-0.5">Q</span>
                        {question}
                    </h4>
                    <div className="flex gap-2 mt-2">
                        <span className="text-stone-300 font-black text-lg leading-none ml-0.5">A</span>
                        <p className="text-sm text-stone-600 leading-relaxed bg-[#F4F8F6] p-3 rounded-lg rounded-tl-none">
                            {children}
                        </p>
                    </div>
                </div>
            );
        }

        function SectionHeader({ title, iconName }) {
            return (
                <div className="flex items-center gap-2 mb-4 pb-2 border-b border-stone-200">
                    <div className="p-2 bg-emerald-100 text-emerald-700 rounded-lg">
                        <Icon name={iconName} className="w-5 h-5" />
                    </div>
                    <h2 className="text-xl font-bold text-stone-800">{title}</h2>
                </div>
            );
        }

        // --- åŠŸèƒ½åŒºå— ---
        
        function PredictionSection() {
            // [é€»è¾‘] åˆå§‹äººæ•° 20
            const [count, setCount] = useState(20);
            
            const minTime = Math.floor(count * 0.75);
            
            // [é€»è¾‘] 25äººåˆ†ç•Œçº¿
            let maxTime;
            if (count < 25) {
                maxTime = Math.ceil(count * 2.0);
            } else {
                maxTime = Math.ceil(count * 1.5);
            }
            
            const formatDuration = (m) => m === 0 ? "0åˆ†é’Ÿ" : (m < 60 ? `${m}åˆ†é’Ÿ` : `${Math.floor(m/60)}å°æ—¶${m%60 > 0 ? m%60+'åˆ†' : ''}`);

            return (
                <Card>
                    <div className="p-1">
                        <div className="flex flex-col sm:flex-row sm:items-end justify-between gap-4 mb-6">
                            <div className="w-full">
                                <label className="text-sm font-bold text-stone-700 flex items-center gap-2 mb-4">
                                    <Icon name="Smile" className="w-4 h-4 text-emerald-500" />
                                    å‰é¢è¿˜æœ‰å¤šå°‘äººåœ¨ç­‰å¾…ï¼Ÿ
                                </label>
                                <div className="flex items-center gap-4">
                                    <input type="range" min="0" max="200" value={count} onChange={(e) => setCount(Number(e.target.value))} className="flex-1 h-2 bg-stone-200 rounded-lg appearance-none cursor-pointer accent-emerald-500 hover:accent-emerald-400 transition-all" />
                                    <div className="bg-stone-100 rounded-lg px-4 py-2 flex items-center gap-1 min-w-[4.5rem] justify-center border border-stone-200">
                                        <span className="font-bold text-emerald-700 text-lg">{count}</span>
                                        <span className="text-xs text-stone-500">äºº</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div className="bg-gradient-to-br from-[#F4F8F6] to-[#FAF8F5] rounded-xl p-6 border border-emerald-100/50 flex flex-col items-center text-center shadow-sm">
                            <p className="text-stone-400 text-xs mb-2 tracking-wide uppercase">å¤§æ¦‚éœ€è¦ç­‰å¾…</p>
                            <div className="text-2xl font-bold text-stone-700 tracking-tight flex items-baseline gap-2">
                                <span className="text-emerald-600 text-3xl">{formatDuration(minTime)}</span>
                                <span className="text-stone-300 font-light text-sm">è‡³</span>
                                <span className="text-stone-600 text-xl">{formatDuration(maxTime)}</span>
                            </div>
                        </div>
                        <div className="mt-4 flex items-start gap-3 px-2 pt-2">
                            <Icon name="Coffee" className="w-4 h-4 text-orange-400 mt-0.5 flex-shrink-0" />
                            <p className="text-xs text-stone-500 leading-relaxed">
                                æ‚¨å¯ä»¥åˆ©ç”¨è¿™æ®µæ—¶é—´ä¼‘æ¯ä¸€ä¸‹ã€‚
                                <span className="text-orange-500 ml-1">è¯·ç¨å¾®ç•™æ„å«å·å±ï¼Œè¿‡å·éœ€è¦é‡æ–°å–å·å“¦ã€‚</span>
                            </p>
                        </div>
                    </div>
                </Card>
            );
        }

        function PaymentSection() {
            return (
                <div className="space-y-6">
                    <Card>
                        <h3 className="text-lg font-bold text-stone-800 mb-4 border-l-4 border-emerald-500 pl-3">æ”¶åˆ°é€šçŸ¥è¯¥æ€ä¹ˆåŠï¼Ÿ</h3>
                        <div className="space-y-4">
                            <div className="bg-[#F4F8F6] p-4 rounded-xl border border-emerald-100">
                                <h4 className="font-bold text-emerald-800 text-sm flex items-center gap-2 mb-2"><Icon name="Info" className="w-4 h-4" /> æ”¶åˆ°â€œéœ€è¿›ä¸€æ­¥ç¼´è´¹â€</h4>
                                <ul className="text-sm text-stone-600 space-y-2 list-disc list-inside">
                                    <li><span className="font-medium text-stone-700">è‡ªè´¹ç”¨æˆ·ï¼š</span>å¯ç›´æ¥é€šè¿‡çº¿ä¸Šè¡¥ç¼´ã€‚</li>
                                    <li><span className="font-medium text-stone-700">åŒ»ä¿ç”¨æˆ·ï¼š</span>éœ€å‰å¾€åŒ»é™¢ç¼´è´¹çª—å£ç°åœºç¼´è´¹ã€‚</li>
                                    <li><span className="font-medium text-stone-700">åˆ‡æ¢ç±»å‹ï¼š</span>å¦‚æƒ³è‡ªè´¹è½¬åŒ»ä¿ï¼Œå¿…é¡»å»ç°åœºçª—å£ã€‚</li>
                                </ul>
                            </div>
                            <div className="bg-[#FFF8F0] p-4 rounded-xl border border-orange-100">
                                <h4 className="font-bold text-orange-800 text-sm flex items-center gap-2 mb-2"><Icon name="Info" className="w-4 h-4" /> æ”¶åˆ°â€œéœ€è¦è¡¥äº¤ç™½ç‰‡â€</h4>
                                <p className="text-sm text-stone-600 leading-relaxed">è¯·æŒ‰é€šçŸ¥è¦æ±‚å»åŸåŒ»é™¢åˆ‡å¥½ç™½ç‰‡ï¼Œç„¶åé€å¾€ç—…ç†ç§‘çª—å£ã€‚</p>
                            </div>
                        </div>
                    </Card>
                    <Card>
                        <h3 className="text-lg font-bold text-stone-800 mb-4 border-l-4 border-emerald-500 pl-3">ç°åœºç¼´è´¹/é€ç™½ç‰‡æµç¨‹</h3>
                        <div className="relative border-l-2 border-emerald-100 ml-3 space-y-8 py-2">
                            <Step number="1" title="è‡ªåŠ©æœºå–å·" desc="å‰å¾€2å·æ¥¼ä¸‰æ¥¼ç—…ç†ç§‘é—¨å¤–è‡ªåŠ©æœºã€‚è¾“å…¥èº«ä»½è¯æˆ–ç”µå­å°±è¯Šå¡è·å–æ’é˜Ÿå·ã€‚" note="å°è´´å£«ï¼šè¿‡å·éœ€é‡æ–°æ’é˜Ÿã€‚" />
                            <Step number="2" title="ç—…ç†ç§‘çª—å£é¢†å•/äº¤ç‰‡" desc="æŠ¥èº«ä»½è¯å·å’Œå§“åï¼Œé¢†å–çº¢å­—å•æ®ã€‚å¦‚æœ‰ç™½ç‰‡ï¼Œæ­¤æ—¶äº¤ç»™çª—å£ã€‚" />
                            <Step number="3" title="äºŒæ¥¼ç¼´è´¹" desc="å‰å¾€2å·æ¥¼äºŒæ¥¼ç¼´è´¹çª—å£ï¼Œé€’äº¤çº¢å­—å•æ®ç¼´è´¹ã€‚ç¼´è´¹åä¼šè¿”è¿˜ç›–ç« çš„çº¢å­—å•æ®ã€‚" />
                            <Step number="4" title="è¿”è¿˜å•æ® (å…³é”®)" desc="å›åˆ°ä¸‰æ¥¼ç—…ç†ç§‘çª—å£ï¼Œå°†ç›–ç« çš„çº¢å­—å•æ®äº¤å›ã€‚" note="æ— éœ€é‡æ–°æ’é˜Ÿï¼Œç›´æ¥å»çª—å£å³å¯ã€‚" />
                        </div>
                    </Card>
                    <Card>
                        <h3 className="text-lg font-bold text-stone-800 mb-4 border-l-4 border-emerald-500 pl-3">è¡¥ç¼´è´¹åå¤šä¹…å‡ºæŠ¥å‘Šï¼Ÿ</h3>
                        <div className="grid gap-3">
                            <TimeItem title="å…ç–«ç»„åŒ– (IHC)" time="2 - 3 å‘¨" desc="å¿«åˆ™ä¸¤å‘¨ï¼Œæ…¢åˆ™ä¸‰å‘¨å·¦å³ã€‚" />
                            <TimeItem title="è§å…‰åŸä½æ‚äº¤ (FISH)" time="çº¦ 2 å‘¨" />
                            <TimeItem title="åˆ†å­ç—…ç†/PCR/åŸºå› æ£€æµ‹" time="çº¦ 1 ä¸ªæœˆ" desc="ç»„ç»‡/ç»†èƒè§å…‰å®šé‡è„±æ°§æ ¸ç³–æ ¸é…¸èšåˆé…¶é“¾ååº”" />
                        </div>
                    </Card>
                    <Card>
                        <h3 className="text-lg font-bold text-stone-800 mb-4 border-l-4 border-emerald-500 pl-3">å¸¸è§ç–‘é—®</h3>
                        <FAQItem question="ç¬¬ä¸€æ¬¡æ˜¯è‡ªè´¹/åŒ»ä¿ï¼Œè¡¥ç¼´è´¹å¯ä»¥åˆ‡æ¢å—ï¼Ÿ">å¯ä»¥ï¼Œåœ¨ç¼´è´¹çª—å£é‚£é‡Œå¯ä»¥ç”³è¯·åˆ‡æ¢ã€‚</FAQItem>
                        <FAQItem question="å¿…é¡»å»ç—…ç†ç§‘çª—å£å–å·æ‰èƒ½è¡¥ç¼´è´¹å—ï¼Ÿ">ä¸ä¸€å®šã€‚å¯ä»¥å…ˆå»è‡ªåŠ©æœºæˆ–äºŒæ¥¼ç¼´è´¹çª—å£å°è¯•ï¼Œå¦‚æœèƒ½åˆ·å‡ºç¼´è´¹é¡¹ç›®ç›´æ¥ç¼´ï¼›å¦‚æœçœ‹ä¸åˆ°é¡¹ç›®ï¼Œå†å»ç—…ç†ç§‘æ’é˜Ÿã€‚</FAQItem>
                    </Card>
                </div>
            );
        }

        function PickupSection() {
            return (
                <div className="space-y-6">
                    <Card>
                        <h3 className="text-lg font-bold text-stone-800 mb-4 border-l-4 border-emerald-500 pl-3">å–æŠ¥å‘Š/åˆ‡ç‰‡æµç¨‹</h3>
                        
                        <div className="space-y-4">
                            <Step number="1" title="å–å·" desc="2å·æ¥¼ä¸‰æ¥¼ç—…ç†ç§‘é—¨å¤–è‡ªåŠ©æœºï¼Œè¾“å…¥èº«ä»½è¯å·å–å·ã€‚" />
                            <Step number="2" title="çª—å£é¢†å–" desc="å«å·ååˆ°çª—å£æŠ¥èº«ä»½è¯å·å’Œå§“åã€‚" />
                        </div>
                        <div className="mt-6 bg-stone-50 p-4 rounded-xl text-sm border border-stone-100">
                            <strong className="block text-stone-700 mb-2 flex items-center gap-2"><Icon name="Sparkles" className="w-4 h-4 text-orange-400" /> é¢†å–ç‰©å“è¯´æ˜</strong>
                            <ul className="space-y-2 text-stone-600 pl-1">
                                <li className="flex items-start gap-2"><span className="text-emerald-500">âœ…</span><span>é¢†å–ç—…ç†æŠ¥å‘Š + åŸå•ä½æŠ¥å‘Š/åˆ‡ç‰‡ã€‚</span></li>
                                <li className="flex items-start gap-2"><span className="text-emerald-500">ğŸ”™</span><span><strong>é€€è¿˜ï¼š</strong>åŸå•ä½æŸ“è‰²åˆ‡ç‰‡ï¼ˆHEåŠIHCï¼‰ã€æœªä½¿ç”¨å®Œçš„ç™½ç‰‡ã€‚</span></li>
                                <li className="flex items-start gap-2"><span className="text-stone-400">ğŸ”’</span><span><strong>ä¸é€€è¿˜ï¼š</strong>å·²ä½¿ç”¨çš„ç™½ç‰‡ã€æœ‰æŸè€—çš„èœ¡å—ã€‚</span></li>
                            </ul>
                        </div>
                    </Card>
                    <div className="bg-[#FFF8F0] border-l-4 border-orange-300 p-4 rounded-r-xl shadow-sm">
                        <div className="flex items-start">
                            <Icon name="AlertCircle" className="w-5 h-5 text-orange-400 mt-0.5 mr-3 flex-shrink-0" />
                            <div>
                                <h3 className="font-bold text-orange-800 text-sm">å…³äºç­‰å¾…æ—¶é—´çš„æ¸©é¦¨æé†’</h3>
                                <p className="text-sm text-stone-600 mt-1">å–æŠ¥å‘Šç­‰å¾…æ—¶é—´æ³¢åŠ¨è¾ƒå¤§ï¼Œå¿«åˆ™å‡ ååˆ†é’Ÿï¼Œæ…¢åˆ™1-2å°æ—¶ã€‚<br/><span className="text-xs text-stone-400 mt-1 block">åŸå› ï¼šçª—å£éœ€å¤„ç†å„ç±»å¤æ‚å’¨è¯¢ï¼Œå¯¼è‡´å«å·é€Ÿåº¦ä¸å‡ã€‚å»ºè®®æ‚¨é¢„ç•™å……è¶³æ—¶é—´ï¼Œæˆ–å‚è€ƒä¸‹æ–¹çš„é¢„æµ‹å·¥å…·ã€‚</span></p>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        function MailingSection() {
            return (
                <div className="space-y-6">
                    <Card>
                        <h3 className="text-lg font-bold text-stone-800 mb-6 border-l-4 border-emerald-500 pl-3">åˆ‡ç‰‡é‚®å¯„æ”»ç•¥</h3>
                        <div className="space-y-8 px-2">
                            <div className="flex gap-4 items-start">
                                <div className="flex flex-col items-center"><div className="w-8 h-8 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center font-bold text-sm">1</div><div className="h-full w-0.5 bg-stone-100 mt-2"></div></div>
                                <div><h3 className="font-bold text-stone-700">å†…éƒ¨å¡«å……</h3><p className="text-sm text-stone-600 mt-1">ç”¨çº¸å·¾å¡«å……åˆ‡ç‰‡ç›’å­å†…éƒ¨ï¼Œç„¶åç”¨çš®ç­‹å›ºå®šç›’å­ã€‚</p><p className="text-xs text-stone-400 mt-1">åŸåˆ™ï¼šç›’å­å†…éƒ¨åˆ‡ç‰‡ä¸æ™ƒåŠ¨å³å¯ã€‚</p></div>
                            </div>
                            <div className="flex gap-4 items-start">
                                <div className="flex flex-col items-center"><div className="w-8 h-8 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center font-bold text-sm">2</div><div className="h-full w-0.5 bg-stone-100 mt-2"></div></div>
                                <div><h3 className="font-bold text-stone-700">é˜²éœ‡å¤„ç†</h3><p className="text-sm text-stone-600 mt-1">ç”¨é˜²éœ‡æ³¡æ²«ï¼ˆæ°”æ³¡è†œï¼‰åŒ…è£¹åˆ‡ç‰‡ç›’å­ï¼Œç„¶åç”¨èƒ¶å¸¦å›ºå®šå¥½ã€‚</p></div>
                            </div>
                            <div className="flex gap-4 items-start">
                                <div className="flex flex-col items-center"><div className="w-8 h-8 rounded-full bg-emerald-100 text-emerald-600 flex items-center justify-center font-bold text-sm">3</div></div>
                                <div><h3 className="font-bold text-stone-700">å¤–éƒ¨åŒ…è£…</h3><p className="text-sm text-stone-600 mt-1">æ‰¾ä¸ªç»“å®çš„çº¸ç®±è£…å¥½ï¼Œå¹¶å‘ŠçŸ¥å¿«é€’å°å“¥é‡Œé¢æ˜¯<strong>æ˜“ç¢å“</strong>ã€‚</p></div>
                            </div>
                        </div>
                        <div className="mt-8 pt-4 border-t border-stone-100 flex items-center gap-2 text-sm text-emerald-700 font-medium bg-[#F4F8F6] p-3 rounded-lg"><Icon name="Info" className="w-4 h-4" /><span>åˆ‡ç‰‡å¸¸æ¸©ä¿å­˜å³å¯ï¼Œåˆ‡è®°ä¸è¦æ²¾æ°´ã€‚</span></div>
                    </Card>
                </div>
            );
        }

        // --- ä¸» App ç»„ä»¶ ---

        function App() {
            const [activeTab, setActiveTab] = useState('payment');
            const [showQR, setShowQR] = useState(false);
            // ç”¨äºå­˜å‚¨ QR å®ä¾‹ï¼Œé˜²æ­¢é‡å¤ç”Ÿæˆ (React Ref æ–¹å¼)
            const qrInstanceRef = useRef(null);

            const paymentRef = useRef(null);
            const pickupRef = useRef(null);
            const predictRef = useRef(null);
            const mailRef = useRef(null);

            const scrollToSection = (id, ref) => {
                setActiveTab(id);
                const yOffset = -140; 
                const element = ref.current;
                if (element) {
                    const y = element.getBoundingClientRect().top + window.scrollY + yOffset;
                    window.scrollTo({ top: y, behavior: 'smooth' });
                }
            };

            const tabs = [
                { id: 'payment', label: 'è¡¥ç¼´è´¹/è¡¥ç™½ç‰‡', icon: 'CreditCard', ref: paymentRef },
                { id: 'pickup', label: 'å–æŠ¥å‘Š/åˆ‡ç‰‡', icon: 'FileText', ref: pickupRef },
                { id: 'predict', label: 'ç­‰å€™é¢„æµ‹', icon: 'Hourglass', ref: predictRef },
                { id: 'mail', label: 'é‚®å¯„æ”»ç•¥', icon: 'Package', ref: mailRef },
            ];

            // [æ ¸å¿ƒé€»è¾‘] äºŒç»´ç ç”Ÿæˆ useEffect (å«å®‰å“è¡¥ä¸)
            useEffect(() => {
                const qrContainer = document.getElementById("qrcode");
                if (qrContainer && !qrInstanceRef.current) {
                    qrContainer.innerHTML = ""; // æ¸…ç©º
                    
                    // 1. ç”ŸæˆäºŒç»´ç 
                    qrInstanceRef.current = new QRCode(qrContainer, {
                        text: "https://u.wechat.com/EKcPjhL9GyGJtvlbGIc9Bbs",
                        width: 200, 
                        height: 200,
                        colorDark : "#064e3b", 
                        colorLight : "#ffffff",
                        correctLevel : QRCode.CorrectLevel.H
                    });

                    // 2. [å®‰å“è¡¥ä¸] å»¶è¿Ÿæ£€æµ‹ canvas è½¬æ¢æƒ…å†µ
                    setTimeout(() => {
                        const canvas = qrContainer.querySelector('canvas');
                        const img = qrContainer.querySelector('img');
                        
                        // å¦‚æœæœ‰ canvas ä½†æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥çš„ img (æˆ– img src ä¸ºç©º)
                        if (canvas && (!img || !img.src || img.style.display === 'none')) {
                            // æ‰‹åŠ¨è½¬æ¢ canvas -> img
                            const dataUrl = canvas.toDataURL("image/png");
                            let targetImg = img;
                            if (!targetImg) {
                                targetImg = document.createElement("img");
                                qrContainer.appendChild(targetImg);
                            }
                            targetImg.src = dataUrl;
                            targetImg.style.display = "block"; // å¼ºåˆ¶æ˜¾ç¤º
                            // å†æ¬¡ç¡®ä¿ canvas éšè—ï¼ˆè™½ç„¶ CSS å·²ç»åšäº†ï¼Œä½†åŒé‡ä¿é™©ï¼‰
                            canvas.style.display = "none";
                        }
                    }, 100); // ç¨å¾®å»¶æ—¶ç­‰å¾… canvas æ¸²æŸ“å®Œæˆ
                }
            }, []);

            return (
                <div className="min-h-screen bg-[#FDFBF7] text-stone-700 font-sans pb-20 selection:bg-emerald-100">
                    
                    {/* [æ–°ç‰ˆ] å¾®ä¿¡å¼¹çª— */}
                    <div 
                        id="qrModal" 
                        className={`fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black bg-opacity-60 backdrop-blur-sm transition-all duration-300 ${showQR ? 'opacity-100 pointer-events-auto' : 'opacity-0 pointer-events-none'}`}
                        onClick={() => setShowQR(false)}
                    >
                        <div 
                            className={`bg-white rounded-2xl p-6 max-w-sm w-full relative shadow-2xl transform transition-all duration-300 ${showQR ? 'scale-100' : 'scale-95'}`}
                            onClick={e => e.stopPropagation()}
                        >
                            <button onClick={() => setShowQR(false)} className="absolute top-3 right-4 text-gray-400 hover:text-gray-700 text-3xl font-light focus:outline-none">&times;</button>
                            
                            <div className="text-center mt-2">
                                <h3 className="text-xl font-bold text-slate-800 mb-1">æ·»åŠ å¾®ä¿¡è”ç³»</h3>
                                <p className="text-sm text-slate-500 mb-4">é•¿æŒ‰è¯†åˆ«æˆ–æ‰«ä¸€æ‰«ä¸‹æ–¹äºŒç»´ç </p>
                                
                                <div className="bg-slate-50 p-6 rounded-xl border border-slate-100 mb-4 flex justify-center items-center">
                                    <div id="qrcode"></div>
                                </div>
                                
                                <div className="font-bold text-teal-700 text-lg">ä¸Šæµ·é™ªè¯Šå°æ²³</div>
                                {/* [ä¿®æ”¹] å›¾æ ‡å·²æ›´æ¢ä¸º Phone */}
                                <div className="text-slate-500 text-sm flex items-center justify-center gap-1 mt-1">
                                    <Icon name="Phone" className="w-3 h-3" />
                                    <span>17898872018</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Header */}
                    <header className="bg-white shadow-sm sticky top-0 z-50">
                        <div className="px-5 py-4 flex justify-between items-center">
                            {/* å·¦ä¾§ */}
                            <div className="flex flex-col">
                                <h1 className="text-stone-800 font-bold text-base leading-none tracking-tight">ä¸Šæµ·é™ªè¯Šå°æ²³</h1>
                                <div className="flex items-center gap-1 text-stone-400 text-xs mt-1.5 font-medium tracking-wide">
                                    <Icon name="Phone" className="w-3 h-3" />
                                    <span>17898872018</span>
                                </div>
                            </div>

                            {/* [æ–°ç‰ˆ] å³ä¾§ï¼šæ ·å¼å®Œå…¨å¯¹é½ */}
                            <button 
                                onClick={() => setShowQR(true)}
                                className="flex items-center gap-1.5 bg-amber-50 hover:bg-amber-100 text-amber-700 border border-amber-200 px-3 py-1.5 rounded-full transition-all text-xs md:text-sm font-bold shrink-0 cursor-pointer shadow-sm"
                            >
                                <Icon name="MessageCircleDots" className="w-4 h-4" />
                                <span>éœ€ä»£åŠ/å’¨è¯¢?</span>
                            </button>
                        </div>
                    
                        {/* å¯¼èˆªæ  */}
                        <div className="bg-white flex overflow-x-auto border-t border-stone-100 no-scrollbar">
                            {tabs.map((tab) => (
                                <button
                                    key={tab.id}
                                    onClick={() => scrollToSection(tab.id, tab.ref)}
                                    className={`flex-1 py-3 px-2 text-sm font-medium flex flex-col items-center gap-1 min-w-[85px] transition-all whitespace-nowrap ${
                                        activeTab === tab.id
                                            ? 'text-emerald-700 border-b-2 border-emerald-600 bg-emerald-50/30'
                                            : 'text-stone-400 hover:text-stone-600 hover:bg-stone-50'
                                    }`}
                                >
                                    <Icon name={tab.icon} className="w-4 h-4" />
                                    {tab.label}
                                </button>
                            ))}
                        </div>
                    </header>

                    <main className="max-w-2xl mx-auto p-4 space-y-8 mt-2">
                        
                        {/* ä¸»æ ‡é¢˜ */}
                        <div className="px-2 pt-2 pb-0">
                            <h1 className="text-2xl font-bold text-emerald-900 tracking-tight mb-2 flex items-center gap-2">
                                <Icon name="FileText" className="w-6 h-6 text-emerald-600" />
                                ä¸Šè‚¿ç—…ç†åŠäº‹æŒ‡å—
                            </h1>
                            <p className="text-stone-500 text-sm ml-1 border-l-2 border-stone-200 pl-3 leading-relaxed">
                                å¤æ—¦å¤§å­¦é™„å±è‚¿ç˜¤åŒ»é™¢ Â· å¸¸è§é—®é¢˜ä¸æµç¨‹æŒ‡å¼•
                            </p>
                        </div>

                        {/* --- å—ç†æ—¶é—´ --- */}
                        <div className="bg-white p-4 rounded-xl shadow-sm border border-emerald-100/50">
                            <h3 className="font-bold text-emerald-800 mb-3 flex items-center gap-2 text-sm">
                                <Icon name="Clock" className="w-4 h-4" /> å—ç†æ—¶é—´
                            </h3>
                            <div className="grid md:grid-cols-2 gap-3 text-sm">
                                <div className="bg-[#F4F8F6] p-3 rounded-lg">
                                    <span className="font-bold block text-emerald-900 mb-1">å¾æ±‡é™¢åŒº</span>
                                    <span className="text-stone-500 text-xs">å‘¨ä¸€è‡³å‘¨å…­</span>
                                    <div className="font-medium text-stone-700 mt-1">8:00-12:00 / 13:30-17:00</div>
                                </div>
                                <div className="bg-[#F4F8F6] p-3 rounded-lg">
                                    <span className="font-bold block text-emerald-900 mb-1">æµ¦ä¸œé™¢åŒº</span>
                                    <span className="text-stone-500 text-xs">å‘¨ä¸€è‡³å‘¨äº”</span>
                                    <div className="font-medium text-stone-700 mt-1">8:00-11:30 / 13:30-16:30</div>
                                </div>
                            </div>
                        </div>

                        {/* Section 1: Payment */}
                        <div ref={paymentRef} className="scroll-mt-36">
                            <SectionHeader title="è¡¥ç¼´è´¹ / è¡¥ç™½ç‰‡" iconName="CreditCard" />
                            <PaymentSection />
                        </div>

                        {/* Section 2: Pickup */}
                        <div ref={pickupRef} className="scroll-mt-36">
                            <SectionHeader title="å–æŠ¥å‘Š / åˆ‡ç‰‡" iconName="FileText" />
                            <PickupSection />
                        </div>

                        {/* Section 3: Prediction */}
                        <div ref={predictRef} className="scroll-mt-36">
                            <SectionHeader title="å–å·ç­‰å€™æ—¶é—´é¢„æµ‹" iconName="Hourglass" />
                            <PredictionSection />
                        </div>

                        {/* Section 4: Mailing */}
                        <div ref={mailRef} className="scroll-mt-36">
                            <SectionHeader title="åˆ‡ç‰‡é‚®å¯„æ”»ç•¥" iconName="Package" />
                            <MailingSection />
                        </div>

                    </main>
                    
                    <footer className="text-center text-stone-400 text-xs py-8 max-w-2xl mx-auto border-t border-stone-200 mt-8 px-4">
                        <p>æ³¨ï¼šæœ¬æŒ‡å—åŠé¢„æµ‹æ—¶é—´ä»…ä¾›å‚è€ƒï¼Œå…·ä½“æµç¨‹å’Œæ—¶é—´è¯·ä»¥åŒ»é™¢ç°åœºå®é™…æƒ…å†µä¸ºå‡†ã€‚</p>
                        <p className="mt-2 opacity-60">
                            éœ€è¦å¸®åŠ©? <button onClick={() => setShowQR(true)} className="underline hover:text-stone-600">è”ç³»å°æ²³</button>
                        </p>
                    </footer>
                    
                    {/* Back to Top */}
                    <button 
                        onClick={() => window.scrollTo({ top: 0, behavior: 'smooth' })}
                        className="fixed bottom-6 right-6 bg-emerald-600 text-white p-3 rounded-full shadow-lg hover:bg-emerald-700 transition-colors z-10 opacity-80 hover:opacity-100"
                    >
                        <Icon name="ArrowUp" className="w-5 h-5" />
                    </button>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>